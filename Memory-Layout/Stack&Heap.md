
# Memory Layout of C program
1. Stack
2. Heap
3. .bss (Uninitialized Data Segment)
4. .data (Initialized Data Segment)
5. .text (Code Segment)


+++STACK+++
-----------
The Stack is a fixed Size storage that stores local variables and function arguments (along with many other things) when the program execute.

**The stack contains a LIFO structure (pile of plates). Function variables are pushed onto the stack when called and functions variables are popped off the stack when return.

**Stack Grows From Highest address of memory to the lowest address of it.


EBP & ESP are the most important CPU registers for the stack


EBP -> points to the beginning of the *functions frame*.

ESP -> always tracks the top of the stack.

![Stack0](https://github.com/lilendian0x00/Linux-Binary-Exploitation/blob/main/Memory-Layout/images/stack0.jpeg)

+++HEAP+++
----------
The Stack is a dynamic Size storage that used to allocate the memory at run time.

Heap area managed by the memory management functions like malloc, calloc, free, etc

**HEAP grows and shrinks in the opposite direction of the stack.

![Stack1](https://github.com/lilendian0x00/Linux-Binary-Exploitation/blob/main/Memory-Layout/images/stack1.png)

+++.bss+++
----------------------------------
It contains all uninitialized global and static variables.

**All Variables = 0 & pointers =  null pointer

ex: int number1; static int number2;

+++.data+++
----------------------------------
Unlike BSS, DS Contains the initialized global and static variables.

**The size of this segment is determined by the size of the values in the programâ€™s source code and does not change at run time.

+++.text+++
----------
This Segment Contains a binary of the compiled program. (contains executable code)

**The TEXT Segment is a read-only segment that prevents a program from being accidentally modified.

```
High Addresses ---> .----------------------.
                    |      Environment     |
                    |----------------------|
                    |                      |   Functions and variable are declared
                    |         STACK        |   on the stack.
base pointer ->     | - - - - - - - - - - -|
                    |           |          |
                    |           v          |
                    :                      :
                    .                      .   The stack grows down into unused space
                    .         Empty        .   while the heap grows up. 
                    .                      .
                    .                      .   (other memory maps do occur here, such 
                    .                      .    as dynamic libraries, and different memory
                    :                      :    allocate)
                    |           ^          |
                    |           |          |
 brk point ->       | - - - - - - - - - - -|   Dynamic memory is declared on the heap
                    |          HEAP        |
                    |                      |
                    |----------------------|
                    |          BSS         |   Uninitialized data (BSS)
                    |----------------------|   
                    |          Data        |   Initialized data (DS)
                    |----------------------|
                    |          Text        |   Binary code
Low Addresses ----> '----------------------'
```
